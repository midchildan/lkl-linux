CFLAGS_posix-host.o += -D_FILE_OFFSET_BITS=64
CFLAGS_virtio_net_vde.o += $(shell pkg-config --cflags vdeplug)

lkl-y += fs.o
lkl-y += iomem.o
lkl-y += net.o
lkl-$(CONFIG_AUTO_LKL_POSIX_HOST) += posix-host.o
lkl-$(CONFIG_AUTO_LKL_NT_HOST) += nt-host.o
lkl-$(CONFIG_AUTO_LKL_RUMP_HOST) += rump.o
lkl-$(CONFIG_AUTO_LKL_RUMP_HOST) += rump-host.o
lkl-y += utils.o
lkl-$(CONFIG_AUTO_LKL_VIRTIO) += virtio_blk.o
lkl-$(CONFIG_AUTO_LKL_VIRTIO) += virtio.o
lkl-$(CONFIG_AUTO_LKL_VIRTIO) += virtio_net.o
lkl-$(CONFIG_AUTO_LKL_POSIX_HOST) += virtio_net_tap.o
lkl-$(CONFIG_AUTO_LKL_VIRTIO_NET_DPDK) += virtio_net_dpdk.o
lkl-$(CONFIG_AUTO_LKL_VIRTIO_NET_VDE) += virtio_net_vde.o

# for frankenlibc
CFLAGS_rump-host.o = -I$(RUMP_PREFIX)/../platform/include \
		   -I$(RUMP_PREFIX)/../franken/include